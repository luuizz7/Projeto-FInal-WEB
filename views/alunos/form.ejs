<%- include('../partials/header') %>

<h2 class="text-center"><%= aluno ? "Editar Aluno" : "Novo Aluno" %></h2>

<form action="<%= aluno ? '/alunos/editar/' + aluno.id : '/alunos/novo' %>" method="post">

    <div class="mb-3">
        <label>Nome</label>
        <input class="form-control" type="text" name="nome" value="<%= aluno ? aluno.nome : '' %>" required>
    </div>

    <div class="mb-3">
        <label>Email</label>
        <input class="form-control" type="email" name="email" value="<%= aluno ? aluno.email : '' %>">
    </div>

    <div class="mb-3">
        <label>Turma</label>
        <select class="form-control" name="turmaId" required>
            <option value="">Selecione</option>
            <% turmas.forEach(t => { %>
                <option value="<%= t.id %>" <%= aluno && aluno.turmaId === t.id ? "selected" : "" %>>
                    <%= t.nome %> - <%= t.turno %>
                </option>
            <% }) %>
        </select>
    </div>

    <div class="mb-3">
        <label>Professores</label>
        <select class="form-control" name="professoresIds" multiple>
            <% professores.forEach(prof => { %>
                <option value="<%= prof.id %>"
                    <%= aluno && aluno.professores.some(p => p.id === prof.id) ? "selected" : "" %>>
                    <%= prof.nome %>
                </option>
            <% }) %>
        </select>
        <small class="text-muted">Segure CTRL para selecionar v√°rios.</small>
    </div>

    <button class="btn btn-success w-100 mt-3">
        <%= aluno ? "Atualizar" : "Salvar" %>
    </button>

</form>

<%- include('../partials/footer') %>
